<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="数据统计后台管理">
	<meta name="author" content="邱宝林">
	<title>XXXX后台管理</title>
	<!-- 新 Bootstrap 核心 CSS 文件 -->
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="font-awesome/css/font-awesome.min.css">
	<!--[if IE 7]>
		<link rel="stylesheet" href="assets/css/font-awesome-ie7.min.css">
	<![endif]-->

	<!-- <link rel="stylesheet" href="css/xx-admin.css"> -->
	<link rel="stylesheet" href="css/xx-mask.css">

	<!-- 可选的Bootstrap主题文件（一般不用引入） -->
	<link rel="stylesheet" href="css/bootstrap-theme.min.css">

	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
	<script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
	<script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
	<![endif]-->
</head>
<body>
	<div id="iFrm-load" class="mask-load" style="display:none;">
		<div class="mask-img"></div>
	</div>
	<div class="page-warpper">
		<!-- 100% 宽度 -->
		<div class="container-fluid">
			<div class="row">
				<div class="col-lg-12">
					<h1 class="page-header">XX后台管理系统<small>仪表</small></h1>
					<ol class="breadcrumb">
						<li class="active"><i class="icon-dashboard"></i>仪表</li>
					</ol>
				</div>
			</div>
	
			<div class="row">
				<div class="col-md-3">
					<div class="panel panel-primary">
						<div class="panel-heading">
							<div class="row">
								<div class="col-xs-9">
									<i class="icon-comments icon-4x"></i>
								</div>
								<div class="col-xs-3 text-right">
									<p class="text-nowrap">26</p>
									<p class="text-nowrap">数量</p>
								</div>
							</div>
						</div>
						<a href="#">
							<div class="panel-footer">
								<span class="pull-left">注意查收</span>
								<span class="pull-right"><i class="icon-circle-arrow-right"></i></span>
								<span class="clearfix"></span>
							</div>
						</a>
					</div>
				</div>
				<div class="col-md-3">
					<div class="panel panel-success">
						<div class="panel-heading">
							<div class="row">
								<div class="col-xs-9">
									<i class=" icon-bar-chart icon-4x"></i>
								</div>
								<div class="col-xs-3 text-right">
									<p class="text-nowrap">26</p>
									<p class="text-nowrap">数量</p>
								</div>
							</div>
						</div>
						<a href="#">
							<div class="panel-footer">
								<span class="pull-left">注意查收</span>
								<span class="pull-right"><i class="icon-circle-arrow-right"></i></span>
								<span class="clearfix"></span>
							</div>
						</a>
					</div>
				</div>
				<div class="col-md-3">
					<div class="panel panel-warning">
						<div class="panel-heading">
							<div class="row">
								<div class="col-xs-9">
									<i class=" icon-check icon-4x"></i>
								</div>
								<div class="col-xs-3 text-right">
									<p class="text-nowrap">26</p>
									<p class="text-nowrap">数量</p>
								</div>
							</div>
						</div>
						<a href="#">
							<div class="panel-footer">
								<span class="pull-left">注意查收</span>
								<span class="pull-right"><i class="icon-circle-arrow-right"></i></span>
								<span class="clearfix"></span>
							</div>
						</a>
					</div>
				</div>
				<div class="col-md-3">
					<div class="panel panel-danger">
						<div class="panel-heading">
							<div class="row">
								<div class="col-xs-9">
									<i class="icon-dashboard icon-4x"></i>
								</div>
								<div class="col-xs-3 text-right">
									<p class="text-nowrap">26</p>
									<p class="text-nowrap">数量</p>
								</div>
							</div>
						</div>
						<a href="#">
							<div class="panel-footer">
								<span class="pull-left">注意查收</span>
								<span class="pull-right"><i class="icon-circle-arrow-right"></i></span>
								<span class="clearfix"></span>
							</div>
						</a>
					</div>
				</div>
			</div>
			
			<div class="row">
				<div class="col-lg-12">
					<div class="panel panel-default">
						<div class="panel-heading">
							<i class="icon-signal"></i>
						</div>
						<div class="panel-body">
							<div class="row">
								<div id="l-Charts"></div>
							</div>
							<a href="#">
								<div class="flooter">
									<span class="pull-left"></span>
									<span class="pull-right">查看更多<i class="icon-circle-arrow-right"></i></span>
									<span class="clearfix"></span>
								</div>
							</a>
						</div>
					</div>
				</div>
			</div>
			
			<div class="row">
				<div class="col-md-4">
					<div class="panel panel-default">
						<div class="panel-heading">
							<i class="icon-tags"></i>
							月比例
						</div>
						<div class="panel-body">
							<div id="pie-Charts"></div>
							<a href="#">
								<div class="flooter">
									<span class="pull-left"></span>
									<span class="pull-right">查看更多<i class="icon-circle-arrow-right"></i></span>
									<span class="clearfix"></span>
								</div>
							</a>
						</div>
					</div>
				</div>
				<div class="col-md-4">
					<div class="panel panel-default">
						<div class="panel-heading">
							<i class="icon-tasks"></i>
						 	XX图表
						</div>
						<div class="panel-body">
							<table class="table table-bordered table-striped table-hover">
								<thead>
									<tr>
										<td>Order #</td>
										<td>Order Date</td>
										<td>Order Time</td>
										<td>Amount (USD)</td>
									</tr>
								</thead>
								<tbody>
									<tr>
										<td>3326</td>
										<td>10/21/2013</td>
										<td>3:29 PM</td>
										<td>$321.33</td>
									</tr>
									<tr>
										<td>3326</td>
										<td>10/21/2013</td>
										<td>3:29 PM</td>
										<td>$321.33</td>
									</tr>
									<tr>
										<td>3326</td>
										<td>10/21/2013</td>
										<td>3:29 PM</td>
										<td>$321.33</td>
									</tr>
									<tr>
										<td>3326</td>
										<td>10/21/2013</td>
										<td>3:29 PM</td>
										<td>$321.33</td>
									</tr>
									<tr>
										<td>3326</td>
										<td>10/21/2013</td>
										<td>3:29 PM</td>
										<td>$321.33</td>
									</tr>
									<tr>
										<td>3326</td>
										<td>10/21/2013</td>
										<td>3:29 PM</td>
										<td>$321.33</td>
									</tr>
									<tr>
										<td>3326</td>
										<td>10/21/2013</td>
										<td>3:29 PM</td>
										<td>$321.33</td>
									</tr>
									<tr>
										<td>3326</td>
										<td>10/21/2013</td>
										<td>3:29 PM</td>
										<td>$321.33</td>
									</tr>
									<tr>
										<td>3326</td>
										<td>10/21/2013</td>
										<td>3:29 PM</td>
										<td>$321.33</td>
									</tr>
								</tbody>
							</table>
							<a href="#">
								<div class="flooter">
									<span class="pull-left"></span>
									<span class="pull-right">查看更多<i class="icon-circle-arrow-right"></i></span>
									<span class="clearfix"></span>
								</div>
							</a>
						</div>
						
					</div>
				</div>
				<div class="col-md-4">
					<div class="panel panel-default">
						<div class="panel-heading">
							<i class="icon-time"></i>
							操作动态
						</div>
						<div class="panel-body">
							<ul class="list-group list-hover">
								<li class="list-group-item">
									<i class="icon-money"></i>购买了XXX东西
									<span class="badge">just now</span>
								</li>
								<li class="list-group-item">
									<i class="icon-money"></i>购买了XXX东西
									<span class="badge">2 minutes go</span>
								</li>
								<li class="list-group-item">
									<i class="icon-money"></i>购买了XXX东西
									<span class="badge">30 minutes go</span>
								</li>
								<li class="list-group-item">
									<i class="icon-money"></i>购买了XXX东西
									<span class="badge">1 hour go</span>
								</li>
								<li class="list-group-item">
									<i class="icon-money"></i>购买了XXX东西
									<span class="badge">2 hour go</span>
								</li>
								<li class="list-group-item">
									<i class="icon-money"></i>购买了XXX东西
									<span class="badge">5 hour go</span>
								</li>
								<li class="list-group-item">
									<i class="icon-money"></i>购买了XXX东西
									<span class="badge">5 hour go</span>
								</li>
								<li class="list-group-item">
									<i class="icon-money"></i>购买了XXX东西
									<span class="badge">5 hour go</span>
								</li>
								<li class="list-group-item">
									<i class="icon-money"></i>购买了XXX东西
									<span class="badge">5 hour go</span>
								</li>
							</ul>
							<a href="#">
								<div class="flooter">
									<span class="pull-left"></span>
									<span class="pull-right">查看更多<i class="icon-circle-arrow-right"></i></span>
									<span class="clearfix"></span>
								</div>
							</a>
						</div>
					</div>

				</div>
			</div>
		</div>
	</div>
</body>
	<!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
	<script src="js/jquery-1.10.2.js"></script>
	<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
	<script src="js/bootstrap.min.js"></script>
	<!-- 统计 JS 文件 -->
	<script src="js/plugins/highcharts.js"></script>
	<script src="js/plugins/exporting.js"></script>
	<!-- 自定义封装 饼图 -->
	<script src="js/customize.js"></script>
	<script>
		$(function(){

			var heightCharts = function () {
				var dtd = $.Deferred();
				$.ajax({
					url: 'js/local/heightChar.json',
					type: 'GET',
					dataType: 'json'
				})
				.done(function(result) {
					dtd.resolve(result);
				})
				.fail(function() {
					dtd.resolve();
				});
				return dtd;
			};
			var pieCharts = function () {
				var dtd = $.Deferred();
				$.ajax({
					url: 'js/local/pieChar.json',
					type: 'GET',
					dataType: 'json'
				})
				.done(function(result) {
					dtd.resolve(result);
				})
				.fail(function(result) {
					dtd.resolve(result);
				});
				return dtd.promise();
			};

			/**
			 * 折线图
			 */
			function getHeightCharts (data) {
				var response = data.response,list = response.list;

				if (jQuery.isEmptyObject(response)) {
					return;
				}

				var xAxis = [];
	            var series = [];
	            for (var i in list) {
	                // X轴数据
	                if (list[0].map) {
	                    $.each(list[0].map, function(idx, elem) {
	                        xAxis.push($.formatDate(parseInt(idx),'yyyy/MM/dd'));
	                    });
	                };
	                // 折线图数据
	                var map = {};
	                var data = [];
	                $.each(list[i].map, function(n, m) {
	                     data.push(parseFloat(m));
	                });
	                map['name'] = list[i].name;
	                map['data'] = data;
	                series.push(map);
	            }
				$.lineChart({
					charts:$('#l-Charts'),
					title:"首页折线统计图",
					text:"。c",
					valueSuffix:"",
					xAxis:xAxis,
					series:series
				});
			}

			/**
			 * 饼图
			 */
			function getPieCharts (data) {
				var list = data.__wrapObject;
				var series = [];
				if( list == null){
					return;
				}
				var sum = 0;
				$.each(list, function(idx, val) {
					sum+= val;
				});

				$.each(list, function(idx, val) {
					var map = [];
					if (idx == "IE") {
						var listMap = {};
						listMap["name"] =  idx;
						listMap['y'] = parseFloat(((val/sum)*100).toFixed(2));
						listMap['sliced'] = true;
						listMap['selected'] = true;
						series.push(listMap);
					} else{
						map[0] = idx;
						map[1] = parseFloat(((val/sum)*100).toFixed(2));
						series.push(map);
					}
				});
				$.pieCharts({
					charts:$('#pie-Charts'),
					title:"浏览器 pie 环形图",
					series:series
				});
			}
			function init () {
				$.when(heightCharts(),pieCharts())
				.done(function(data1,data2){
					getHeightCharts(data1);
					getPieCharts(data2);
				})
				.fail(function () {
					alert("出错了....");
				});
			}

			init ();
			
		})
	</script>
</html>