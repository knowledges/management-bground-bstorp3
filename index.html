<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="数据统计后台管理">
	<meta name="author" content="邱宝林">
	<title>XXXX后台管理</title>
	<!-- 新 Bootstrap 核心 CSS 文件 -->
	<link rel="stylesheet" href="css/bootstrap.min.css">
	<link rel="stylesheet" href="font-awesome/css/font-awesome.min.css">
	<!--[if IE 7]>
		<link rel="stylesheet" href="assets/css/font-awesome-ie7.min.css">
	<![endif]-->
	
	<link rel="stylesheet" href="css/xx-admin.css">
	<link rel="stylesheet" href="css/xx-mask.css">

	<!-- 可选的Bootstrap主题文件（一般不用引入） -->
	<link rel="stylesheet" href="css/bootstrap-theme.min.css">

	<!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
	<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
	<!--[if lt IE 9]>
	    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
	    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
	<![endif]-->
	<style>
		html{
			overflow-y: hidden;
		}
	</style>
</head>
<body>	
	<div id="iFrm-load" class="mask-load">
		<div class="mask-img"></div>
	</div>
	<div class="wrapper">
		
		<!-- Navigation -->
		<nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
			
			<!-- Brand and toggle get grouped for better mobile display -->
			<div class="navbar-header">
				<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-ex-collapse1">
					<span class="sr-only">Toggle navigation</span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
					<span class="icon-bar"></span>
				</button>
				<a href="index.html" class="navbar-brand">
				<i class="icon-leaf "></i>
					SB Admin
					<!-- <img src="" alt=""> -->
				</a>
			</div>
			<!-- top right -->
			<ul class="nav navbar-nav navbar-right top-nav">
				<li class="dropdown open-info">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
						<i class="icon-envelope"></i><b class="caret"></b></a>
						<ul class="dropdown-menu message-dropdown">
							<li class="message-preview">
								<a href="javascript:alert('显示这条信息');">
									<div class="media">
									  <div class="media-left media-middle">
									      <img class="media-object" src="http://placehold.it/50x50" alt="...">
									  </div>
									  <div class="media-body">
									    <h4 class="media-heading"><strong>John Smith</strong>
                                        </h4>
                                        <p class="small text-muted"><i class="glyphicon glyphicon-time"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
									  </div>
									</div>
								</a>
							</li>
							<li class="message-preview">
								<a href="javascript:alert('显示这条信息');">
									<div class="media">
									  <div class="media-left media-middle">
									      <img class="media-object" src="http://placehold.it/50x50" alt="...">
									  </div>
									  <div class="media-body">
									    <h4 class="media-heading"><strong>John Smith</strong>
                                        </h4>
                                        <p class="small text-muted"><i class="glyphicon glyphicon-time"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
									  </div>
									</div>
								</a>
							</li>
							<li class="message-preview">
								<a href="javascript:alert('显示这条信息');">
									<div class="media">
									  <div class="media-left media-middle">
									      <img class="media-object" src="http://placehold.it/50x50" alt="...">
									  </div>
									  <div class="media-body">
									    <h4 class="media-heading"><strong>John Smith</strong>
                                        </h4>
                                        <p class="small text-muted"><i class="glyphicon glyphicon-time"></i> Yesterday at 4:32 PM</p>
                                        <p>Lorem ipsum dolor sit amet, consectetur...</p>
									  </div>
									</div>
								</a>
							</li>
							<li class="message-footer">
                            	<a href="message.html#all=1">Read All New Messages</a>
                        	</li>
						</ul>
				</li>
				<li class="dropdown">
					<a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
						<i class="icon-user"></i><span>&nbsp;baolin • qiu&nbsp;</span><b class="caret"></b>
						<ul class="dropdown-menu" role="menu">
							<li><a href="user.html"><i class="glyphicon glyphicon-user"></i>&nbsp;User info</a></li>
							<li><a href="message.html#all=1"><i class="glyphicon glyphicon-envelope"></i>&nbsp;Message</a></li>
							<li><a href="setting.html#user=1,code=22"><i class="glyphicon glyphicon-cog"></i>&nbsp;Setting</a></li>
							<li><a href="#"><i class="glyphicon glyphicon-off"></i>&nbsp;Log Out</a></li>
						</ul>
					</a>
				</li>
			</ul>
			<!-- Collect the nav links, forms, and other content for toggling -->
			<div class="collapse navbar-collapse" id="navbar-ex-collapse1">
				<ul class="nav navbar-nav side-nav" id="menuLeft">
					<!-- <li >
						<a href="javascript:;;" data-target="#chart-collpsed"  data-toggle="collapse">
							<i class=" icon-paste"></i>
								 表单
							<i class="icon-resize-full"></i>
						</a>
						<ul id="chart-collpsed" class="collapse">
							<li>
								<a href="charts.html#idx=1" target="page-frame">
								<i class="icon-dashboard"></i>
									仪表板
								</a>
							</li>
						</ul>
					</li>
					<li >
						<a href="javascript:;;" data-target="#edit-collpsed"  data-toggle="collapse">
							<i class=" icon-paste"></i>
								 表单
							<i class="icon-resize-full"></i>
						</a>
							<ul id="edit-collpsed" class="collapse">
								<li>
									<a href="articles.html#idx=2" target="page-frame">
									<i class="icon-edit"></i>
									文章发布
									</a>
								</li>
								<li class="active">
									<a href="registered.html" target="page-frame">
										<i class="icon-eye-open"></i>
										注册
									</a>
								</li>
								<li>
									<a href="falls.html" target="page-frame">
										<i class="icon-eye-open"></i>
										瀑布流
									</a>
								</li>
							</ul>
						
					</li>
					<li >
						<a href="javascript:;;" data-target="#table-collpsed"  data-toggle="collapse">
							<i class="icon-table"></i>
							表格
						</a>
						<ul id="table-collpsed" class="collapse">
							<li><a href="table.html#idx=3" target="page-frame">表格A</a></li>
							<li><a href="" target="page-frame">表格B</a></li>
						</ul>
					</li> -->
				</ul>
			</div>
		</nav>
		
		<iframe id="page-frame" name="page-frame" src="table.html"  width="100%" ></iframe>

	</div>
	<!-- jQuery文件。务必在bootstrap.min.js 之前引入 -->
	<script src="js/jquery-1.10.2.js"></script>
	<!-- 最新的 Bootstrap 核心 JavaScript 文件 -->
	<script src="js/bootstrap.min.js"></script>
	<!-- 统计 JS 文件 -->
	<!-- // <script src="js/plugins/highcharts.js"></script> -->
	<!-- // <script src="js/plugins/exporting.js"></script> -->
	<!-- 自定义封装 饼图 -->
	<!-- // <script src="js/customize.js"></script> -->
	<script>
		$(function(){
			var MENUICON_PARENT = ["icon-dashboard","icon-paste","icon-table"];
			var MENUICON_CHILD = ["icon-dashboard","icon-edit","icon-eye-open","icon-eye-open","icon-table"];

			window.onload = function(){
				var height = $(document).height()-50;
				$('#page-frame').height(height);	
				init();
			}

			function init () {
				loadMenuLeft();
			}

			var loadMenuLeft = function() {
				var count = 0;
				$.getJSON('js/local/menu.json', {}, function(data) {
					var list = data.response.list;
					var html = [];
					$.each(list, function(id, val) {
						html.push('<li >');
						html.push('<a href="javascript:;;" data-target="#chart-collpsed'+id+'" data-toggle="collapse">');
						html.push('<i class="'+MENUICON_PARENT[id]+'"></i>');
						html.push(val.name+'</a>');
						html.push('<ul id="chart-collpsed'+id+'" class="collapse menul">');
						html.push(loadMenuPath(val.childList));
						html.push('</ul>');
						html.push('</li>');
					});

					$("#menuLeft").prepend(html.join(''));

					setTimeout(function(){
						$("#iFrm-load").fadeOut();
					},500);

					var $cUl =$('.menul li');
					$cUl.unbind('click').click(function (event) {
						var e = event || window.event;
						var target = e.target || e.srcElement;
						if (target.nodeName.toLowerCase() == "li" || target.nodeName.toLowerCase() == "a") {
							var href =$(this).find('a').data('href') || $(this).data('href');
							frmOnloadMethod({
								iframe:$("#page-frame"),
								iSrc:href,
								callback:function () {
								}
							});
						}
					});
					
				});

				function loadMenuPath(data) {
					var html = [];
					$.each(data, function(id, val) {
						html.push('<li>');
						html.push('<a href="javascript:;;" data-href="'+val.path+'#idx='+id+'" target="page-frame">');
						html.push('<i class="'+MENUICON_CHILD[count]+'"></i>');
						html.push(val.childname);
						html.push('</a></li>');
						count++;
					});
					return html.join('');
				}				
			}

			/**
			 * 判断ifrme 什么时候加载完成
			 * @param  {[type]} option [description]
			 * @return {[type]}        [description]
			 */
			function frmOnloadMethod (option) {
				var iframe = option.iframe[0];
				var iSrc = iframe.src;
				if (option.iSrc) {
					iSrc = option.iSrc;
				} 
				iframe.src = iSrc;

				if (iframe.addEventListener) {
					iframe.addEventListener("load", function(){
						option.callback();
					},false);
				} else if (iframe.attachEvent) {
					iframe.attachEvent("onload",function () {
						option.callback();
					});
				} else {
					iframe.onLoad = function () {
						option.callback();
					};
				}
			}
		})
	</script>
</body>
</html>